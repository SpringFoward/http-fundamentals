# HTTP 메서드 🔧
---
+ HTTP API를 만들어보자
+ HTTP 메서드 - GET,POST
+ HTTP 메서드 - PUT,PATCH,DELETE
+ HTTP 메서드의 속성
---
## HTTP API를 만들어 보자 ⚙️

+ 회원 목록 조회
+ 회원 조회
+ 회원 등록
+ 회원 수정
+ 회원 삭제
### 좋은 URI 설계란 무엇일까?
가장 중요한 것은 __리소스 식별__ 이다.

### API URI 고민
+ 리소스의 의미는 뭘까?
 + 회원을 등록하고 수정하고 조회하는 것이 리소스가 아니다
 + ex) 미네랄을 캐라 -> 미네랄을 캐는 것이 리소스가 아니라 미네랄 그 자체가 리소스
 + __회원이라는 개념 자체가 리소스가 된다.__
+ 리소스를 어떻게 식별하는게 좋을까?
 + 회원을 등록하고 수정하고 조회하는 것은 일단 모두 배제한다.
 + __회원이라는 리소스만 식별하면 된다. -> 회원 리소스를 URI에 매핑__
### API URI 설계
#### 리소스와 행위를 분리
가장 중요한 것은 리소스를 식별하는 것

+ __URI__ 는 리소스만 식별!
+ __리소스__ 와 해당 리소스를 대상으로 하는 행위를 분리
 + 리소스 : 회원
 + 행위 : 조회,등록,삭제,변경
+ 리소스는 명사, 행위는 동사
+ 메서드는 어떻게 구분하는가? (__HTTP 메서드로 구분__)
---
## HTTP 메서드 - GET(조회),POST(등록)📝
__주요 메서드__

+ GET : 리소스 조회
+ POST : 요청 데이터 처리, 주로 등록에 사용
+ PUT: 리소스를 대체, 해당 리소스가 없으면 생성
+ PATCH : 리소스 부분 변경
+ DELETE : 리소스 삭제

__기타 메서드__
+ HEAD : GET과 동일하지만 메세지 부분을 제외하고, 상태 줄과 헤더만 반환
+ OPTIONS : 대상 리소스에 대한 통신 가능 옵션(메서드)를 설명(주로 CORS에서 사용)
+ CONNECT : 대상 자원으로 식별되는 서버에 대한 터널을 수정
+ TRACE: 대상 리소스에 대한 경오를 따라 메세지 루프백 테스트를 수행

### GET
+ 리소스 조회
+ 서버에 전달하고 싶은 데이터는 __쿼리__ 를 통해서 전달
+ 메세지 바디를 사용해서 데이터를 전달할 수 있지만, 지원하지 않는 곳이 많아서 권장하지 않는다.
![[스크린샷 2024-05-06 170809.png]]GET 함수로 100번째 멤버에 있는 것을 서버에 요청을 하면 서버에서는 이를 인식하고 멤버에 100번째 있는 정보를 클라이언트에 보내준다.
---
### POST
+ 요청 데이터 처리
+ __메세지 바디를 통해 서버로 요청 데이터 전달__
+ 서버는 요청 데이터를 처리
 + 메세지 바디를 통해 들어온 데이터를 처리하는 모든 기능을 수행한다.
+  주로 전달된 데이터로 신규 리소스 등록, 프로세스 처리에 사용
![[스크린샷 2024-05-06 171527.png]]
이렇게 클라이언트에서 멤버라는 장소에 이 데이터를 넣어달라고 요청하면 서버에서 그 데이터를 저장하여 사용한다. 다시 필요할 때는  GET을 이용하여 다시 가져오면 된다.

### POST 예시
POST는 다음과 같은 양식에 사용된다.
+ HTML 양식에 입력 된 필드와 같은 데이터 블록을 데이터 처리 프로세스에 제공
+ 게시판, 뉴스 그룹, 메일링 리스트, 블로그 또는 유사한 기사 그룹에 메세지 게시
+ 서버가 아직 식별하지 않은 새 리소스 생성
+ 기존 자원에 데이터 추가

### POST 정리
1. 새 리소스 생성
	서버가 아직 식별하지 않은 새 리소스 생성
2. 요청 데이터 처리
	 단순히 데이터를 생성하거나, 변경하는 것을 넘어서 프로세스를 처리해야 하는 경우
	 ex) 주문에서 결제완료 -> 배달 시작 -> 배달완료 처럼 단순히 값 변경을 넘어 프로세스의 상태가 변경되는 경우
3. 다른 메서드로 처리하기 애매한 경우
	 ex) JSON으로 조회 데이터를 넘겨야 하는데, GET 메서드를 사용하기 어려운 경우
---
## HTTP 메서드 - PUT,PATCH,DELETE  🔄

+ __리소스를 대체함__
 +  리소스가 있으면 대체함
 + 리소스가 없으면 새로 생성함
 + 쉽게 이야기해서 덮어쓰기
+ __중요! 클라이언트가 리소스를 식별한다__
 + 클라이언트가 리소스 위치를 알고 URI 지정
 + POST와의 차이점이다.
 + POST는 멤버 어디에 넣는지 모른다고 하면 PUT은 내가 멤버 100번째에 넣는다고 설정하면 그렇게 넣어준다.
 ![[스크린샷 2024-05-06 184911.png]]
 PUT의 경우는 이렇게 100번째 멤버자리에 다른 정보가 저장이 되어 있으면 여기에 새로운 정보로 __교체__ 한다.
#### PATCH

+ 리소스를 부분적으로 변경한다.
 ![[스크린샷 2024-05-06 185305.png]]
 이렇게 username필드가 없는 리소스를 PATCH로 집어넣었을 때 __age만이 변경__ 된다.
### DELETE

+ 리소스를 제거한다.

---
## HTTP 메서드의 속성 🔍
+ 안전(Safe Method)
+ 멱등(Idempotent Methods)
+ 캐시가능(Cacheable Method)

### 안전(Safe)
+ 호출해도 리소스를 변경하지 않는다.  (GET, HEAD 리소스를 바꾸지 않음 '안전')
+ 로그가 쌓여서 문제가 발생하는 것은 고려하지 않는다(DDos)
+ 안전은 해당 리소스만 고려한다.

### 멱등(Idempotent)
+ __f(f(x)) = f(x)__
+ 1번 호출하든 100번 호출하던 결과가 바뀌지 않는다
+ 최종 결과물이 바뀌는지 안바뀌는지 말하는 것이다.
+ 재요청 중간에 다른 곳에서 리소스를 변경하는 것으로 멱등이 성립되지 않는것은 고려하지 않는다.

+ __멱등 메서드__ 
 + GET : 1번 조회하던 100번 조회하던 같다.
 + PUT: 결과를 대체한다. 여러번 해도 최종 결과는 같다.
 + DELETE : 여러번 삭제해도 결과는 같다

+ __활용__ 
 + 자동 복구 메커니즘
 + 서버가 정상응답을 주지 못했을 때, 클라이언트가 같은 요청을 똑같이 반복해도 되는지 판단하는 근거가 되어준다.
 

### 캐시가능(Cacheable)
+ 응답결과 리소스를 캐시해서 사용해도 되는가?
+ GET,HEAD,POST,PATCH 캐시가 가능하나 실제로는 GET HEAD정도만 사용
+ POST, PATCH는 본문 내용까지 고려해야 하는데 이게 쉽지않음
---
.